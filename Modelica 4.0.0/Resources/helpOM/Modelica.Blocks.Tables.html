<?xml version="1.0"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="HTML Tidy for HTML5 for Linux version 5.6.0" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<link href="style.css" rel="stylesheet" type="text/css"/>
<title>Modelica.Blocks.Tables</title>
</head>
<body>
<h1><a href="Icons/a0494e72f5ae45847ce878f475bc9cfe5ef6d64d.svg"><img class="svgiconhead" src="Icons/a0494e72f5ae45847ce878f475bc9cfe5ef6d64d.svg"/></a> <a class="omc-h1-a" href="index.html">.</a><a class="omc-h1-a" href="Modelica.html">Modelica</a>.<a class="omc-h1-a" href="Modelica.Blocks.html">Blocks</a>.<span class="omc-h1">Tables</span></h1>
<h2><a id="info" name="info">Information</a></h2>
<p>This package contains blocks for one- and two-dimensional
interpolation in tables.</p>
<h4>Special interest topic: Statically stored tables for real-time
simulation targets</h4>
<p>Especially for use on real-time platform targets (e.g.,
HIL-simulators) with <strong>no file system</strong>, it is
possible to statically store tables using a function "usertab" in a
file conventionally named "usertab.c". This can be more efficient
than providing the tables as Modelica parameter arrays.</p>
<p>This is achieved by providing the tables in a specific structure
as C-code and compiling that C-code together with the rest of the
simulation model into a binary that can be executed on the target
platform. The "Resources/Data/Tables/" subdirectory of the MSL
installation directory contains the files <a href="../../../Modelica%204.0.0/Resources/Data/Tables/usertab.c">"usertab.c"</a>
and <a href="../../../Modelica%204.0.0/Resources/Data/Tables/usertab.h">"usertab.h"</a>
that can be used as a template for own developments. While
"usertab.c" would be typically used unmodified, the "usertab.h"
needs to adapted for the own needs.</p>
<p>In order to work it is necessary that the compiler pulls in the
"usertab.c" file. Different Modelica tools might provide different
mechanisms to do so. Please consult the respective
documentation/support for your Modelica tool.</p>
<p>A possible (though slightly makeshift) approach is to pull in
the required files by utilizing a "dummy"-function that uses the
Modelica external function interface to include the required
"usertab.c". An example how this can be done is given below.</p>
<blockquote>
<pre>
model ExampleCTable "Example utilizing the usertab.c interface"
  extends Modelica.Icons.Example;
  parameter Real dummy(fixed=false) "Dummy parameter" annotation(HideResult=true);
  Modelica.Blocks.Tables.CombiTable1Dv table(tableOnFile=true, tableName="TestTable_1D_a")
    annotation (Placement(transformation(extent={{-40,0},{-20,20}})));
  Modelica.Blocks.Sources.ContinuousClock clock
    annotation (Placement(transformation(extent={{-80,0},{-60,20}})));
protected
  encapsulated impure function getUsertab "External dummy function to include \"usertab.c\""
    input Real dummy_u[:];
    output Real dummy_y;
    external "C" dummy_y = mydummyfunc(dummy_u);
    annotation(IncludeDirectory="modelica://Modelica/Resources/Data/Tables",
           Include = "#include "usertab.c"
double mydummyfunc(double* dummy_in) {
   return 0;
}
");
  end getUsertab;
initial equation
  dummy = getUsertab(table.y);
equation
  connect(clock.y, table.u[1]) annotation (Line(points={{-59,10},{-42,10}}, color={0,0,127}));
  annotation (experiment(StartTime=0, StopTime=5), uses(Modelica(version="4.0.0")));
end ExampleCTable;
</pre></blockquote>
<h2>Contents</h2>
<table>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><a href="Modelica.Blocks.Tables.CombiTable1Ds.html"><img class="svgiconsmall" src="Icons/95412a6e894cb2c52efa80f1e22ecdfb824cf685.svg"/></a> <a href="Modelica.Blocks.Tables.CombiTable1Ds.html">CombiTable1Ds</a></td>
<td>Table look-up in one dimension (matrix/file) with one input and
n outputs</td>
</tr>
<tr>
<td><a href="Modelica.Blocks.Tables.CombiTable1Dv.html">CombiTable1Dv</a></td>
<td>Table look-up in one dimension (matrix/file) with n inputs and
n outputs</td>
</tr>
<tr>
<td><a href="Modelica.Blocks.Tables.CombiTable2Ds.html">CombiTable2Ds</a></td>
<td>Table look-up in two dimensions (matrix/file)</td>
</tr>
<tr>
<td><a href="Modelica.Blocks.Tables.CombiTable2Dv.html"><img class="svgiconsmall" src="Icons/f21425cb2ff80b242401558d3b35396b650421da.svg"/></a> <a href="Modelica.Blocks.Tables.CombiTable2Dv.html">CombiTable2Dv</a></td>
<td>Table look-up in two dimensions (matrix/file) with vector
inputs and vector output of size n</td>
</tr>
<tr>
<td><a href="Modelica.Blocks.Tables.Internal.html"><img class="svgiconsmall" src="Icons/c9827a148b2b4ce4dfc7c2fd880d5e0edb49c26c.svg"/></a> <a href="Modelica.Blocks.Tables.Internal.html">Internal</a></td>
<td>Internal external object definitions for table functions that
should not be directly utilized by the user</td>
</tr>
</table>
<hr/>
Generated at 2020-06-05T21:39:08Z by <a href="http://openmodelica.org">OpenModelica 1.16.0~dev-442-g2e5bc9f</a>
</body>
</html>
