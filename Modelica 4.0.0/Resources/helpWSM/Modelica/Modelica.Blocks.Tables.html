
<html>
<head>
  <meta charset="UTF-8">
  <title>Modelica: Blocks.Tables</title>
  <link rel=stylesheet type=text/css href="resources/documentation.css">
  <script src="resources/jquery.min.js"></script>
  <script src="resources/scripts.js"></script>
</head>
<body>
<div class="wrapper">
<nav>
  <ul class="cf">
    <li><a href="https://www.wolfram.com/system-modeler/">System Modeler</a></li>
  <li><a href="Modelica.html">Modelica</a></li>
  <li><a href="Modelica.Blocks.html">Blocks</a></li>
  <li><a href="Modelica.Blocks.Tables.html">Tables</a></li>
  </ul>
</nav>
<header>
  <table><tr><td>
    <h1>Tables</h1>
    <p>Library of blocks to interpolate in one and two-dimensional tables</p>
  </td><td>
    <div><img width="60" height="60" src="resources/icons/Modelica.Blocks.Tables_60x60.png"></div>
  </td></tr></table>
</header>
<section id="package-contents">
  <h1>Package Contents</h1>
  <div class="hideable">
    <table class="shared-styles style-2">
    <colgroup><col class="col-1" /><col class="col-2" /></colgroup>
    <tbody>
    <tr>
      <td><img width="32" height="32" src="resources/icons/Modelica.Blocks.Tables.CombiTable1Ds_32x32.png"></td>
      <td>
        <p><a href="Modelica.Blocks.Tables.CombiTable1Ds.html">CombiTable1Ds</a></p>
        <p>Table look-up in one dimension (matrix/file) with one input and n outputs</p>
      </td>
    </tr>
    <tr>
      <td><img width="32" height="32" src="resources/icons/Modelica.Blocks.Tables.CombiTable1Dv_32x32.png"></td>
      <td>
        <p><a href="Modelica.Blocks.Tables.CombiTable1Dv.html">CombiTable1Dv</a></p>
        <p>Table look-up in one dimension (matrix/file) with n inputs and n outputs</p>
      </td>
    </tr>
    <tr>
      <td><img width="32" height="32" src="resources/icons/Modelica.Blocks.Tables.CombiTable2Ds_32x32.png"></td>
      <td>
        <p><a href="Modelica.Blocks.Tables.CombiTable2Ds.html">CombiTable2Ds</a></p>
        <p>Table look-up in two dimensions (matrix/file)</p>
      </td>
    </tr>
    <tr>
      <td><img width="32" height="32" src="resources/icons/Modelica.Blocks.Tables.CombiTable2Dv_32x32.png"></td>
      <td>
        <p><a href="Modelica.Blocks.Tables.CombiTable2Dv.html">CombiTable2Dv</a></p>
        <p>Table look-up in two dimensions (matrix/file) with vector inputs and vector output of size n</p>
      </td>
    </tr>
    <tr>
      <td><img width="32" height="32" src="resources/icons/Modelica.Blocks.Tables.Internal_32x32.png"></td>
      <td>
        <p><a href="Modelica.Blocks.Tables.Internal.html">Internal</a></p>
        <p>Internal external object definitions for table functions that should not be directly utilized by the user</p>
      </td>
    </tr>
    </tbody>
    </table>
  </div>
</section>
<section id="information">
<h1>Information</h1>
<div class="hideable">
<p class="aside">This information is part of the Modelica Standard Library maintained by the Modelica Association.</p>
<p>This package contains blocks for one- and two-dimensional interpolation in tables.</p>
<h4>Special interest topic: Statically stored tables for real-time simulation targets</h4>
<p>Especially for use on real-time platform targets (e.g., HIL-simulators) with <strong>no file system</strong>, it is possible to statically
store tables using a function &quot;usertab&quot; in a file conventionally named &quot;usertab.c&quot;. This can be more efficient than providing the tables as Modelica parameter arrays.</p>
<p>This is achieved by providing the tables in a specific structure as C-code and compiling that C-code together with the rest of the simulation model into a binary
that can be executed on the target platform. The &quot;Resources/Data/Tables/&quot; subdirectory of the MSL installation directory contains the files
<a href="resources/Modelica.Blocks.Tables_info_001.c">&quot;usertab.c&quot;</a> and <a href="resources/Modelica.Blocks.Tables_info_002.h">&quot;usertab.h&quot;</a>
that can be used as a template for own developments. While &quot;usertab.c&quot; would be typically used unmodified, the
&quot;usertab.h&quot; needs to adapted for the own needs.</p>
<p>In order to work it is necessary that the compiler pulls in the &quot;usertab.c&quot; file. Different Modelica tools might provide different mechanisms to do so.
Please consult the respective documentation/support for your Modelica tool.</p>
<p>A possible (though slightly makeshift) approach is to pull in the required files by utilizing a &quot;dummy&quot;-function that uses the Modelica external function
interface to include the required &quot;usertab.c&quot;. An example how this can be done is given below.</p>
<blockquote><pre>
model ExampleCTable "Example utilizing the usertab.c interface"
  extends Modelica.Icons.Example;
  parameter Real dummy(fixed=false) "Dummy parameter" annotation(HideResult=true);
  Modelica.Blocks.Tables.CombiTable1Dv table(tableOnFile=true, tableName="TestTable_1D_a")
    annotation (Placement(transformation(extent={{-40,0},{-20,20}})));
  Modelica.Blocks.Sources.ContinuousClock clock
    annotation (Placement(transformation(extent={{-80,0},{-60,20}})));
protected
  encapsulated impure function getUsertab "External dummy function to include "usertab.c""
    input Real dummy_u[:];
    output Real dummy_y;
    external "C" dummy_y = mydummyfunc(dummy_u);
    annotation(IncludeDirectory="modelica://Modelica/Resources/Data/Tables",
           Include = "#include "usertab.c"
double mydummyfunc(double* dummy_in) {
   return 0;
}
");
  end getUsertab;
initial equation
  dummy = getUsertab(table.y);
equation
  connect(clock.y, table.u[1]) annotation (Line(points={{-59,10},{-42,10}}, color={0,0,127}));
  annotation (experiment(StartTime=0, StopTime=5), uses(Modelica(version="4.0.0")));
end ExampleCTable;
</pre></blockquote>
</div>
</section>
</div>
</body>
</html>